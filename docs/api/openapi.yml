openapi: 3.0.3
info:
	title: Overture API
	version: 0.1.0
	description: REST API for managing playlists and analyzing audio features.
servers:
	- url: http://localhost:8080
paths:
	/health:
		get:
			summary: Health check
			operationId: healthCheck
			responses:
				"200":
					description: Service is healthy
					content:
						application/json:
							schema:
								$ref: "#/components/schemas/HealthResponse"
							example:
								status: ok
								message: Overture is live
	/playlists:
		post:
			summary: Create a playlist
			operationId: createPlaylist
			requestBody:
				required: true
				content:
					application/json:
						schema:
							$ref: "#/components/schemas/CreatePlaylistRequest"
						example:
							name: Roadtrip Vibes
			responses:
				"201":
					description: Playlist created
					headers:
						Location:
							description: Path to the created playlist
							schema:
								type: string
					content:
						application/json:
							schema:
								$ref: "#/components/schemas/Playlist"
							example:
								id: pl_12345
								name: Roadtrip Vibes
								tracks:
									- id: tr_987
										title: Midnight Drive
										artist: Luna Vale
										album: Neon Highway
										cover_url: https://cdn.example.com/covers/neon-highway.jpg
										duration_ms: 214000
										isrc: USX1A2400001
										features:
											danceability: 0.74
											energy: 0.81
											valence: 0.58
											tempo: 121.6
											instrumentalness: 0.02
											acousticness: 0.09
				"400":
					description: Invalid request
					content:
						application/json:
							schema:
								$ref: "#/components/schemas/ErrorResponse"
				"415":
					description: Unsupported media type
					content:
						application/json:
							schema:
								$ref: "#/components/schemas/ErrorResponse"
				"500":
					description: Server error
					content:
						application/json:
							schema:
								$ref: "#/components/schemas/ErrorResponse"
	/playlists/{id}:
		get:
			summary: Get a playlist
			operationId: getPlaylist
			parameters:
				- name: id
					in: path
					required: true
					schema:
						type: string
			responses:
				"200":
					description: Playlist found
					content:
						application/json:
							schema:
								$ref: "#/components/schemas/Playlist"
							example:
								id: pl_12345
								name: Roadtrip Vibes
								tracks:
									- id: tr_987
										title: Midnight Drive
										artist: Luna Vale
										album: Neon Highway
										cover_url: https://cdn.example.com/covers/neon-highway.jpg
										duration_ms: 214000
										isrc: USX1A2400001
										features:
											danceability: 0.74
											energy: 0.81
											valence: 0.58
											tempo: 121.6
											instrumentalness: 0.02
											acousticness: 0.09
				"400":
					description: Invalid request
					content:
						application/json:
							schema:
								$ref: "#/components/schemas/ErrorResponse"
				"500":
					description: Server error
					content:
						application/json:
							schema:
								$ref: "#/components/schemas/ErrorResponse"
	/playlists/{id}/tracks:
		post:
			summary: Add a track to a playlist
			operationId: addTrack
			parameters:
				- name: id
					in: path
					required: true
					schema:
						type: string
			requestBody:
				required: true
				content:
					application/json:
						schema:
							$ref: "#/components/schemas/AddTrackRequest"
						example:
							title: Midnight Drive
							artist: Luna Vale
			responses:
				"201":
					description: Track added
					headers:
						Location:
							description: Path to the playlist
							schema:
								type: string
					content:
						application/json:
							schema:
								$ref: "#/components/schemas/AddTrackResponse"
							example:
								id: pl_12345
				"400":
					description: Invalid request
					content:
						application/json:
							schema:
								$ref: "#/components/schemas/ErrorResponse"
				"415":
					description: Unsupported media type
					content:
						application/json:
							schema:
								$ref: "#/components/schemas/ErrorResponse"
				"500":
					description: Server error
					content:
						application/json:
							schema:
								$ref: "#/components/schemas/ErrorResponse"
	/playlists/{id}/analysis:
		get:
			summary: Get audio feature analysis for a playlist
			operationId: getPlaylistAnalysis
			parameters:
				- name: id
					in: path
					required: true
					schema:
						type: string
			responses:
				"200":
					description: Playlist audio features
					content:
						application/json:
							schema:
								$ref: "#/components/schemas/AudioFeatures"
							example:
								danceability: 0.68
								energy: 0.72
								valence: 0.55
								tempo: 118.2
								instrumentalness: 0.04
								acousticness: 0.12
				"400":
					description: Invalid request
					content:
						application/json:
							schema:
								$ref: "#/components/schemas/ErrorResponse"
				"500":
					description: Server error
					content:
						application/json:
							schema:
								$ref: "#/components/schemas/ErrorResponse"
components:
	schemas:
		HealthResponse:
			type: object
			properties:
				status:
					type: string
				message:
					type: string
			required:
				- status
				- message
				example:
					status: ok
					message: Overture is live
		ErrorResponse:
			type: object
			properties:
				error:
					type: string
			required:
				- error
				example:
					error: Invalid request body
		CreatePlaylistRequest:
			type: object
			properties:
				name:
					type: string
			required:
				- name
				example:
					name: Roadtrip Vibes
		AddTrackRequest:
			type: object
			properties:
				title:
					type: string
				artist:
					type: string
			required:
				- title
				- artist
				example:
					title: Midnight Drive
					artist: Luna Vale
			AddTrackResponse:
				type: object
				properties:
					id:
						type: string
				required:
					- id
				example:
					id: pl_12345
		Playlist:
			type: object
			properties:
				id:
					type: string
				name:
					type: string
				tracks:
					type: array
					items:
						$ref: "#/components/schemas/Track"
			required:
				- id
				- name
				- tracks
				example:
					id: pl_12345
					name: Roadtrip Vibes
					tracks:
						- id: tr_987
							title: Midnight Drive
							artist: Luna Vale
							album: Neon Highway
							cover_url: https://cdn.example.com/covers/neon-highway.jpg
							duration_ms: 214000
							isrc: USX1A2400001
							features:
								danceability: 0.74
								energy: 0.81
								valence: 0.58
								tempo: 121.6
								instrumentalness: 0.02
								acousticness: 0.09
		Track:
			type: object
			properties:
				id:
					type: string
				title:
					type: string
				artist:
					type: string
				album:
					type: string
				cover_url:
					type: string
				duration_ms:
					type: integer
					format: int32
				isrc:
					type: string
				features:
					$ref: "#/components/schemas/AudioFeatures"
			required:
				- id
				- title
				- artist
				- album
				- cover_url
				- duration_ms
				- isrc
				- features
				example:
					id: tr_987
					title: Midnight Drive
					artist: Luna Vale
					album: Neon Highway
					cover_url: https://cdn.example.com/covers/neon-highway.jpg
					duration_ms: 214000
					isrc: USX1A2400001
					features:
						danceability: 0.74
						energy: 0.81
						valence: 0.58
						tempo: 121.6
						instrumentalness: 0.02
						acousticness: 0.09
		AudioFeatures:
			type: object
			properties:
				danceability:
					type: number
					format: double
				energy:
					type: number
					format: double
				valence:
					type: number
					format: double
				tempo:
					type: number
					format: double
				instrumentalness:
					type: number
					format: double
				acousticness:
					type: number
					format: double
			required:
				- danceability
				- energy
				- valence
				- tempo
				- instrumentalness
				- acousticness
				example:
					danceability: 0.68
					energy: 0.72
					valence: 0.55
					tempo: 118.2
					instrumentalness: 0.04
					acousticness: 0.12
